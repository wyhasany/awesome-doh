# awesome-doh

1.

[https://1.1.1.1/](https://1.1.1.1/)

Benchmark of dns providers:

https://medium.com/@nykolas.z/dns-resolvers-performance-compared-cloudflare-x-google-x-quad9-x-opendns-149e803734e5

2. DNSSEC vs DNS over HTTPs/TLS

https://developers.cloudflare.com/1.1.1.1/dns-over-https/

3. Windows

3.1 Download cloudflared service:

[https://developers.cloudflare.com/argo-tunnel/downloads/](https://developers.cloudflare.com/argo-tunnel/downloads/)

for Windows 32/64b:

[https://bin.equinox.io/c/VdrWdbjqyF/cloudflared-stable-windows-386.zip](https://bin.equinox.io/c/VdrWdbjqyF/cloudflared-stable-windows-386.zip)

[https://bin.equinox.io/c/VdrWdbjqyF/cloudflared-stable-windows-amd64.zip](https://bin.equinox.io/c/VdrWdbjqyF/cloudflared-stable-windows-amd64.zip)

and save at:

C:\cloudflared\cloudflared.exe

At the same location create following text file &quot;config.yaml&quot; with following content:

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

proxy-dns: true

logfile: C:\cloudflared\logs.txt

proxy-dns-upstream:

 - https://1.1.1.1/dns-query

 - [https://1.0.0.1/dns-query](https://1.0.0.1/dns-query)

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

Do not afraid it is an open-source project has written in Go:

[https://github.com/cloudflare/cloudflared](https://github.com/cloudflare/cloudflared)

download cloudflared certificate:

in chrome:

open page:

https://www.cloudflare.com/a/login
open developer tools ctrl+shift+i

go to security tab:

![](img/image1.png)

click on view certificate and go to details tab

![](img/image2.png)

Click on button copy to file

Then click next

![](img/image3.png)

Choose file format as nase-64 x.509

![](img/image4.png)

And save as cloudflaredcom.crt in C:\cloudflared

![](img/image5.png)

Click next and finish

![](img/image6.png)

You should see export successful:

Then rename file clouflaredcom.crt.cer to cloudflared.crt

On firefox

Open page:

![](img/image7.png)

Click on padlock aand then on right arrow

![](img/image8.png)

then on more information button:

![](img/image9.png)

Then we are clicking on show certificate:

![](img/image10.png)

Click on details tab:

![](img/image11.png)

And export then save (it will have a proper name by default).

Now copy config.yaml and cloudflarecom.crt to the following destination:

C:\Users\your\_username\.cloudflared

Now execute powershell

cd C:\cloudflared\

.\cloudflared service install

Click on start and typ services and open app services:

![](img/image12.png)

Click twice on it and go to log on tab

![](img/image13.png)

Choose log on as your username, type your password and apply. Restart your computer and voila! The service Argo Tunnel should run properly!

![](img/image14.png)

Lets enable using local dns proxy to prevent view MiTM view of your dns resolving like there ðŸ˜Š

![](img/image15.png)

Click on wifi icon in network toolbar -&gt; Network &amp; Internet Service -&gt; Change Adapter options -&gt; RBM on your network adapter -&gt; Settings -&gt; Internet Protocol Version 4 (TCP/IPv4) -&gt; Properties -&gt; Use the following DNS -&gt; 127.0.0.1 -&gt; OK and now all dns traffic is encrypted in TLS!

![](img/image16.png)

![](img/image17.png)

## On linux just follow instructions on

https://developers.cloudflare.com/1.1.1.1/dns-over-https/cloudflared-proxy/

and then you can configure your `vim /etc/resolvconf/resolv.conf.d/head`

```
# Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)
#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
nameserver 127.0.0.1
```

to use everywhere your local dns proxy